---
title: JavaScriptä¸€è¡Œä»£ç APIğŸ”¥ğŸ”¥
date: 2024-10-27 09:48:37
permalink: /pages/a61298/
categories:
  - å‰ç«¯
  - JavaScript
tags:
  - JavaScript
author:
  name: HuberyYang
  link: https://github.com/Hub-yang
---

## ä¸€ã€æ—¥æœŸå¤„ç†

### 1. æ£€å¯Ÿæ—¥æœŸæ˜¯å¦æœ‰æ•ˆ

è¯¥æ–¹æ³•ç”¨äºæ£€æµ‹ç»™å‡ºçš„æ—¥æœŸæ˜¯å¦æœ‰æ•ˆï¼š

```javascript
const isDateValid = (...val) => !Number.isNaN(new Date(...val).valueOf())

isDateValid('December 17, 1995 03:24:00') // true
å¤åˆ¶ä»£ç 
```

### 2. è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„é—´éš”

è¯¥æ–¹æ³•ç”¨äºè®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„é—´éš”æ—¶é—´ï¼š

```javascript
function dayDif(date1, date2) {
  return Math.ceil(Math.abs(date1.getTime() - date2.getTime()) / 86400000)
}

dayDif(new Date('2021-11-3'), new Date('2022-2-1')) // 90
å¤åˆ¶ä»£ç 
```

è·ç¦»è¿‡å¹´è¿˜æœ‰ 90 å¤©~

### 3. æŸ¥æ‰¾æ—¥æœŸä½äºä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©

è¯¥æ–¹æ³•ç”¨äºæ£€æµ‹ç»™å‡ºçš„æ—¥æœŸä½äºä»Šå¹´çš„ç¬¬å‡ å¤©ï¼š

```javascript
function dayOfYear(date) {
  return Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24)
}

dayOfYear(new Date()) // 307
å¤åˆ¶ä»£ç 
```

2021 å¹´å·²ç»è¿‡å» 300 å¤šå¤©äº†~

### 4. æ—¶é—´æ ¼å¼åŒ–

è¯¥æ–¹æ³•å¯ä»¥ç”¨äºå°†æ—¶é—´è½¬åŒ–ä¸º hour:minutes:seconds çš„æ ¼å¼ï¼š

```javascript
const timeFromDate = date => date.toTimeString().slice(0, 8)

timeFromDate(new Date(2021, 11, 2, 12, 30, 0)) // 12:30:00
timeFromDate(new Date()) // è¿”å›å½“å‰æ—¶é—´ 09:00:00
å¤åˆ¶ä»£ç 
```

## äºŒã€å­—ç¬¦ä¸²å¤„ç†

### 1. å­—ç¬¦ä¸²é¦–å­—æ¯å¤§å†™

è¯¥æ–¹æ³•ç”¨äºå°†è‹±æ–‡å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¤§å†™å¤„ç†ï¼š

```javascript
const capitalize = str => str.charAt(0).toUpperCase() + str.slice(1)

capitalize('hello world') // Hello world
å¤åˆ¶ä»£ç 
```

### 2. ç¿»è½¬å­—ç¬¦ä¸²

è¯¥æ–¹æ³•ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œç¿»è½¬æ“ä½œï¼Œè¿”å›ç¿»è½¬åçš„å­—ç¬¦ä¸²ï¼š

```javascript
const reverse = str => str.split('').reverse().join('')

reverse('hello world') // 'dlrow olleh'
å¤åˆ¶ä»£ç 
```

### 3. éšæœºå­—ç¬¦ä¸²

è¯¥æ–¹æ³•ç”¨äºç”Ÿæˆä¸€ä¸ªéšæœºçš„å­—ç¬¦ä¸²ï¼š

```javascript
const randomString = () => Math.random().toString(36).slice(2)

randomString()
å¤åˆ¶ä»£ç 
```

### 4. æˆªæ–­å­—ç¬¦ä¸²

è¯¥æ–¹æ³•å¯ä»¥ä»æŒ‡å®šé•¿åº¦å¤„æˆªæ–­å­—ç¬¦ä¸²:

```javascript
function truncateString(string, length) {
  return string.length < length ? string : `${string.slice(0, length - 3)}...`
}

truncateString('Hi, I should be truncated because I am too loooong!', 36) // 'Hi, I should be truncated because...'
å¤åˆ¶ä»£ç 
```

### 5. å»é™¤å­—ç¬¦ä¸²ä¸­çš„ HTML

è¯¥æ–¹æ³•ç”¨äºå»é™¤å­—ç¬¦ä¸²ä¸­çš„ HTML å…ƒç´ ï¼š

```javascript
function stripHtml(html) {
  return new DOMParser().parseFromString(html, 'text/html').body.textContent || ''
}
å¤åˆ¶ä»£ç 
```

## ä¸‰ã€æ•°ç»„å¤„ç†

### 1. ä»æ•°ç»„ä¸­ç§»é™¤é‡å¤é¡¹

è¯¥æ–¹æ³•ç”¨äºç§»é™¤æ•°ç»„ä¸­çš„é‡å¤é¡¹ï¼š

```javascript
const removeDuplicates = arr => [...new Set(arr)]

console.log(removeDuplicates([1, 2, 2, 3, 3, 4, 4, 5, 5, 6]))
å¤åˆ¶ä»£ç 
```

### 2. åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º

è¯¥æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸€ä¸ªæ•°ç»„æ˜¯å¦ä¸ºç©ºæ•°ç»„ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼š

```javascript
const isNotEmpty = arr => Array.isArray(arr) && arr.length > 0

isNotEmpty([1, 2, 3]) // true
å¤åˆ¶ä»£ç 
```

### 3. åˆå¹¶ä¸¤ä¸ªæ•°ç»„

å¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•æ¥åˆå¹¶ä¸¤ä¸ªæ•°ç»„ï¼š

```javascript
const merge = (a, b) => a.concat(b);

const merge = (a, b) => [...a, ...b];
å¤åˆ¶ä»£ç ;
```

## å››ã€æ•°å­—æ“ä½œ

### 1. åˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°

è¯¥æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°ï¼š

```javascript
const isEven = num => num % 2 === 0

isEven(996)
å¤åˆ¶ä»£ç 
```

### 2. è·å¾—ä¸€ç»„æ•°çš„å¹³å‡å€¼

```javascript
const average = (...args) => args.reduce((a, b) => a + b) / args.length

average(1, 2, 3, 4, 5) // 3
å¤åˆ¶ä»£ç 
```

### 3. è·å–ä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„éšæœºæ•´æ•°

è¯¥æ–¹æ³•ç”¨äºè·å–ä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„éšæœºæ•´æ•°

```javascript
const random = (min, max) => Math.floor(Math.random() * (max - min + 1) + min)

random(1, 50)
å¤åˆ¶ä»£ç 
```

### 4. æŒ‡å®šä½æ•°å››èˆäº”å…¥

è¯¥æ–¹æ³•ç”¨äºå°†ä¸€ä¸ªæ•°å­—æŒ‰ç…§æŒ‡å®šä½è¿›è¡Œå››èˆäº”å…¥ï¼š

```javascript
const round = (n, d) => Number(`${Math.round(`${n}e${d}`)}e-${d}`)

round(1.005, 2) // 1.01
round(1.555, 2) // 1.56
å¤åˆ¶ä»£ç 
```

## äº”ã€é¢œè‰²æ“ä½œ

### 1. å°† RGB è½¬åŒ–ä¸ºåå…­æœºåˆ¶

è¯¥æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ª RGB çš„é¢œè‰²å€¼è½¬åŒ–ä¸º 16 è¿›åˆ¶å€¼ï¼š

```javascript
function rgbToHex(r, g, b) {
  return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1)}`
}

rgbToHex(255, 255, 255) // '#ffffff'
å¤åˆ¶ä»£ç 
```

### 2. è·å–éšæœºåå…­è¿›åˆ¶é¢œè‰²

è¯¥æ–¹æ³•ç”¨äºè·å–ä¸€ä¸ªéšæœºçš„åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š

```javascript
function randomHex() {
  return `#${Math.floor(Math.random() * 0xFFFFFF)
    .toString(16)
    .padEnd(6, '0')}`
}

randomHex()
å¤åˆ¶ä»£ç 
```

## å…­ã€æµè§ˆå™¨æ“ä½œ

### 1. å¤åˆ¶å†…å®¹åˆ°å‰ªåˆ‡æ¿

è¯¥æ–¹æ³•ä½¿ç”¨ navigator.clipboard.writeText æ¥å®ç°å°†æ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼š

```javascript
const copyToClipboard = text => navigator.clipboard.writeText(text)

copyToClipboard('Hello World')
å¤åˆ¶ä»£ç 
```

### 2. æ¸…é™¤æ‰€æœ‰ cookie

è¯¥æ–¹æ³•å¯ä»¥é€šè¿‡ä½¿ç”¨ document.cookie æ¥è®¿é—® cookie å¹¶æ¸…é™¤å­˜å‚¨åœ¨ç½‘é¡µä¸­çš„æ‰€æœ‰ cookieï¼š

```javascript
const clearCookies = document.cookie
  .split(';')
  .forEach(
    cookie =>
      (document.cookie = cookie
        .replace(/^ +/, '')
        .replace(/=.*/, `=;expires=${new Date(0).toUTCString()};path=/`))
  )
å¤åˆ¶ä»£ç 
```

### 3. è·å–é€‰ä¸­çš„æ–‡æœ¬

è¯¥æ–¹æ³•é€šè¿‡å†…ç½®çš„ getSelection å±æ€§è·å–ç”¨æˆ·é€‰æ‹©çš„æ–‡æœ¬ï¼š

```javascript
const getSelectedText = () => window.getSelection().toString()

getSelectedText()
å¤åˆ¶ä»£ç 
```

### 4. æ£€æµ‹æ˜¯å¦æ˜¯é»‘æš—æ¨¡å¼

è¯¥æ–¹æ³•ç”¨äºæ£€æµ‹å½“å‰çš„ç¯å¢ƒæ˜¯å¦æ˜¯é»‘æš—æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼š

```javascript
const isDarkMode
  = window.matchMedia
    && window.matchMedia('(prefers-color-scheme: dark)').matches

console.log(isDarkMode)
å¤åˆ¶ä»£ç 
```

### 5. æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨

è¯¥æ–¹æ³•ç”¨äºåœ¨é¡µé¢ä¸­è¿”å›é¡¶éƒ¨ï¼š

```javascript
const goToTop = () => window.scrollTo(0, 0)

goToTop()
å¤åˆ¶ä»£ç 
```

### 6. åˆ¤æ–­å½“å‰æ ‡ç­¾é¡µæ˜¯å¦æ¿€æ´»

è¯¥æ–¹æ³•ç”¨äºæ£€æµ‹å½“å‰æ ‡ç­¾é¡µæ˜¯å¦å·²ç»æ¿€æ´»ï¼š

```javascript
const isTabInView = () => !document.hidden
å¤åˆ¶ä»£ç 
```

### 7. åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯è‹¹æœè®¾å¤‡

è¯¥æ–¹æ³•ç”¨äºæ£€æµ‹å½“å‰çš„è®¾å¤‡æ˜¯å¦æ˜¯è‹¹æœçš„è®¾å¤‡ï¼š

```javascript
const isAppleDevice = () => /Mac|iPod|iPhone|iPad/.test(navigator.platform)

isAppleDevice()
å¤åˆ¶ä»£ç 
```

### 8. æ˜¯å¦æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨

è¯¥æ–¹æ³•ç”¨äºåˆ¤æ–­é¡µé¢æ˜¯å¦å·²ç»åº•éƒ¨ï¼š

```javascript
function scrolledToBottom() {
  return document.documentElement.clientHeight + window.scrollY
    >= document.documentElement.scrollHeight
}
å¤åˆ¶ä»£ç 
```

### 9. é‡å®šå‘åˆ°ä¸€ä¸ª URL

è¯¥æ–¹æ³•ç”¨äºé‡å®šå‘åˆ°ä¸€ä¸ªæ–°çš„ URLï¼š

```javascript
const redirect = url => (location.href = url)

redirect('https://www.google.com/')
å¤åˆ¶ä»£ç 
```

### 10. æ‰“å¼€æµè§ˆå™¨æ‰“å°æ¡†

è¯¥æ–¹æ³•ç”¨äºæ‰“å¼€æµè§ˆå™¨çš„æ‰“å°æ¡†ï¼š

```javascript
const showPrintDialog = () => window.print()
å¤åˆ¶ä»£ç 
```

## ä¸ƒã€å…¶ä»–æ“ä½œ

### 1. éšæœºå¸ƒå°”å€¼

è¯¥æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªéšæœºçš„å¸ƒå°”å€¼ï¼Œä½¿ç”¨ Math.random()å¯ä»¥è·å¾— 0-1 çš„éšæœºæ•°ï¼Œä¸ 0.5 è¿›è¡Œæ¯”è¾ƒï¼Œå°±æœ‰ä¸€åŠçš„æ¦‚ç‡è·å¾—çœŸå€¼æˆ–è€…å‡å€¼ã€‚

```javascript
const randomBoolean = () => Math.random() >= 0.5

randomBoolean()
å¤åˆ¶ä»£ç 
```

### 2. å˜é‡äº¤æ¢

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å½¢å¼åœ¨ä¸é€‚ç”¨ç¬¬ä¸‰ä¸ªå˜é‡çš„æƒ…å†µä¸‹ï¼Œäº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼š

```javascript
[foo, bar] = [bar, foo]
å¤åˆ¶ä»£ç 
```

### 3. è·å–å˜é‡çš„ç±»å‹

è¯¥æ–¹æ³•ç”¨äºè·å–ä¸€ä¸ªå˜é‡çš„ç±»å‹ï¼š

```javascript
function trueTypeOf(obj) {
  return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase()
}

trueTypeOf('') // string
trueTypeOf(0) // number
trueTypeOf() // undefined
trueTypeOf(null) // null
trueTypeOf({}) // object
trueTypeOf([]) // array
trueTypeOf(0) // number
trueTypeOf(() => {}) // function
å¤åˆ¶ä»£ç 
```

### 4. åæ°åº¦å’Œæ‘„æ°åº¦ä¹‹é—´çš„è½¬åŒ–

è¯¥æ–¹æ³•ç”¨äºæ‘„æ°åº¦å’Œåæ°åº¦ä¹‹é—´çš„è½¬åŒ–ï¼š

```javascript
const celsiusToFahrenheit = celsius => (celsius * 9) / 5 + 32
const fahrenheitToCelsius = fahrenheit => ((fahrenheit - 32) * 5) / 9

celsiusToFahrenheit(15) // 59
celsiusToFahrenheit(0) // 32
celsiusToFahrenheit(-20) // -4
fahrenheitToCelsius(59) // 15
fahrenheitToCelsius(32) // 0
å¤åˆ¶ä»£ç 
```

### 5. æ£€æµ‹å¯¹è±¡æ˜¯å¦ä¸ºç©º

è¯¥æ–¹æ³•ç”¨äºæ£€æµ‹ä¸€ä¸ª JavaScript å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼š

```javascript
function isEmpty(obj) {
  return Reflect.ownKeys(obj).length === 0 && obj.constructor === Object
}
å¤åˆ¶ä»£ç 
```

> ä½œè€…ï¼šHuberyYang
